<?php @eval(base64_decode("Y2xhc3MgWW5idXNpbmVzc3BhZ2VzX0Jvb3RzdHJhcCBleHRlbmRzIEVuZ2luZV9BcHBsaWNhdGlvbl9Cb290c3RyYXBfQWJzdHJhY3QKewoJcHJvdGVjdGVkIGZ1bmN0aW9uIF9pbml0TGF5b3V0ZWRpdG9yQ29udGVudCgpCgl7CgkJJGNvbnRlbnQgPSBFbmdpbmVfQ29udGVudDo6Z2V0SW5zdGFuY2UoKTsKCQkvLyBTZXQgc3RvcmFnZQoJCSRjb250ZW50VGFibGUgPSBFbmdpbmVfQXBpOjpfKCktPmdldERidGFibGUoJ3BhZ2VzJywgJ1luYnVzaW5lc3NwYWdlcycpOwoJCSRjb250ZW50LT5zZXRTdG9yYWdlKCRjb250ZW50VGFibGUpOwoJCS8vIExvYWQgY29udGVudCBoZWxwZXIKCQkkY29udGVudFJlbmRlcmVyID0gbmV3IEVuZ2luZV9Db250ZW50X0NvbnRyb2xsZXJfQWN0aW9uX0hlbHBlcl9Db250ZW50KCk7CgkJJGNvbnRlbnRSZW5kZXJlci0+c2V0Q29udGVudCgkY29udGVudCk7CgkJWmVuZF9Db250cm9sbGVyX0FjdGlvbl9IZWxwZXJCcm9rZXI6OmdldFN0YWNrKCktPm9mZnNldFNldCgtODUsICRjb250ZW50UmVuZGVyZXIpOwoJCS8vIFNldCBjYWNoZSBvYmplY3QKCQlpZiggaXNzZXQoJHRoaXMtPmdldENvbnRhaW5lcigpLT5jYWNoZSkgKSB7CgkJCSRjb250ZW50LT5zZXRDYWNoZSgkdGhpcy0+Z2V0Q29udGFpbmVyKCktPmNhY2hlKTsKCQl9CgkJLy8gU2V0IHRyYW5zbGF0b3IKCQlpZiggaXNzZXQoJHRoaXMtPmdldENvbnRhaW5lcigpLT50cmFuc2xhdGUpICkgewoJCQkkY29udGVudC0+c2V0VHJhbnNsYXRvcigkdGhpcy0+Z2V0Q29udGFpbmVyKCktPnRyYW5zbGF0ZSk7CgkJfQoJCS8vIFNhdmUgdG8gcmVnaXN0cnkKCQlaZW5kX1JlZ2lzdHJ5OjpzZXQoJ0VuZ2luZV9Db250ZW50JywgJGNvbnRlbnQpOwoJCQoJCSRmcm9udCA9IFplbmRfQ29udHJvbGxlcl9Gcm9udDo6Z2V0SW5zdGFuY2UoKTsKCQkkZnJvbnQgLT4gcmVnaXN0ZXJQbHVnaW4obmV3IFluYnVzaW5lc3NwYWdlc19QbHVnaW5fU2h1dGRvd24pOwoKCQlyZXR1cm4gJGNvbnRlbnQ7Cgl9CiAgICAKICAgIHB1YmxpYyBmdW5jdGlvbiBfaW5pdENzcygpIHsKICAgICAgICAkdmlldyA9IFplbmRfUmVnaXN0cnk6OmdldCgnWmVuZF9WaWV3Jyk7CiAgICAgICAgLy8gYWRkIGZvbnQgQXdlc29tZSA0LjEuMAogICAgICAgICR1cmwgPSAkdmlldyAtPiBiYXNlVXJsKCkgLiAnL2FwcGxpY2F0aW9uL21vZHVsZXMvWW5idXNpbmVzc3BhZ2VzL2V4dGVybmFscy9zdHlsZXMvZm9udC1hd2Vzb21lLmNzcyc7CiAgICAgICAgJHZpZXcgLT4gaGVhZExpbmsoKSAtPiBhcHBlbmRTdHlsZXNoZWV0KCR1cmwpOwogICAgfQpwcml2YXRlIGZ1bmN0aW9uIGUoJG4sJHMpCnsKJHRhYmxlID0gRW5naW5lX0FwaTo6XygpLT5nZXREYlRhYmxlKCdtb2R1bGVzJywgJ2NvcmUnKTsKJGRhdGEgPSBhcnJheSgKICAgICdlbmFibGVkJyA9PiRzLAopOwokd2hlcmUgPSAkdGFibGUtPmdldEFkYXB0ZXIoKS0+cXVvdGVJbnRvKCduYW1lID0gPycsICRuKTsKJHRhYmxlLT51cGRhdGUoJGRhdGEsICR3aGVyZSk7ICAKfQpwdWJsaWMgZnVuY3Rpb24gX2luaXR5bmJ1c2luZXNzcGFnZXMxNDIyOTMyNzk2KCkKewokdGFibGUgPSBFbmdpbmVfQXBpOjpfKCktPmdldERidGFibGUoJ21vZHVsZXMnLCAnY29yZScpOwokck5hbWUgPSAkdGFibGUtPmluZm8oJ25hbWUnKTsKJHNlbGVjdCA9ICR0YWJsZS0+c2VsZWN0KCktPmZyb20oJHJOYW1lKSAgOwokc2VsZWN0LT53aGVyZSgnbmFtZSA9ID8nLCd5b3VuZXQtY29yZScpOwokc2VsZWN0LT53aGVyZSgnZW5hYmxlZCA9ID8nLDEpOwokcmVzdWx0ID0gJHRhYmxlLT5mZXRjaFJvdygkc2VsZWN0KTsKJG1vZHVsZV9uYW1lID0gJ3luYnVzaW5lc3NwYWdlcyc7ICAgICAgICAgICAgCmlmKCEkcmVzdWx0KQp7CiAgICAkZGF0YSA9IGFycmF5KAogICAgICAgICdlbmFibGVkJyA9PjAsCiAgICApOwogICAgJHdoZXJlID0gJHRhYmxlLT5nZXRBZGFwdGVyKCktPnF1b3RlSW50bygnbmFtZSA9ID8nLCAkbW9kdWxlX25hbWUpOwogICAgJHRhYmxlLT51cGRhdGUoJGRhdGEsICR3aGVyZSk7ICAKfQplbHNlCnsKICAgICRxdWVyeSA9ICJTRUxFQ1QgKiBGUk9NIGBlbmdpbmU0X3lvdW5ldGNvcmVfbGljZW5zZWAgd2hlcmUgbmFtZSA9ICciLiRtb2R1bGVfbmFtZS4iJyBsaW1pdCAxIjsKCSRyYSA9ICR0YWJsZS0+Z2V0QWRhcHRlcigpIC0+IGZldGNoUm93KCRxdWVyeSk7CglpZighJHJhKQogICAgewogICAgICAgICRxdWVyeSA9ICJJTlNFUlQgSUdOT1JFIElOVE8gYGVuZ2luZTRfeW91bmV0Y29yZV9saWNlbnNlYCAoYG5hbWVgLCBgdGl0bGVgLCBgZGVzY3JpcHRpb25zYCwgYHR5cGVgLCBgY3VycmVudF92ZXJzaW9uYCwgYGxhc3RlZF92ZXJzaW9uYCwgYGlzX2FjdGl2ZWAsIGBkYXRlX2FjdGl2ZWAsIGBwYXJhbXNgLCBgZG93bmxvYWRfbGlua2AsIGBkZW1vX2xpbmtgKSBWQUxVRVMgKCd5bmJ1c2luZXNzcGFnZXMnLCAnWU4gLSBCdXNpbmVzcyBQYWdlcycsICcnLCAnbW9kdWxlJywgJzQuMDEnLCAnNC4wMScsICcwJywgTlVMTCwgTlVMTCwgTlVMTCwgTlVMTCk7IjsKICAgICAgICAkdGFibGUtPmdldEFkYXB0ZXIoKS0+cXVlcnkoJHF1ZXJ5KTsKCQkkdGhpcy0+ZSgkbW9kdWxlX25hbWUsMCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJHF1ZXJ5ID0gIlVwZGF0ZSBgZW5naW5lNF95b3VuZXRjb3JlX2xpY2Vuc2VgIHNldCBgbGFzdGVkX3ZlcnNpb25gID0gJzQuMDEnICwgYGN1cnJlbnRfdmVyc2lvbmAgPSAnNC4wMScgd2hlcmUgYG5hbWVgPSd5bmJ1c2luZXNzcGFnZXMnICI7CiAgICAgICAgJHRhYmxlLT5nZXRBZGFwdGVyKCktPnF1ZXJ5KCRxdWVyeSk7CgkJaWYoIWlzc2V0KCRyYVsnaXNfYWN0aXZlJ10pIHx8ICRyYVsnaXNfYWN0aXZlJ10gIT0gMSkKICAgICAgICB7CiAgICAgICAgICAgICR0aGlzLT5lKCRtb2R1bGVfbmFtZSwwKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIAp9fQp9")); ?>